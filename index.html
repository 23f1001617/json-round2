<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency Data Table</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
        }
        body.light {
            background-color: #ffffff;
            color: #000000;
        }
        body.dark {
            background-color: #333333;
            color: #ffffff;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }
        th {
            background-color: #f2f2f2;
        }
        #theme-toggle {
            margin-bottom: 20px;
            padding: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body class="light">
    <button id="theme-toggle">Toggle Theme</button>
    <div id="data-output"></div>
    <div id="markdown-output"></div>
    <div id="fallback" style="display: none;">Failed to load data.</div>
    <footer><!-- build-id: 2023-10-03T12:00:00Z --></footer>
    
    <script>
        const dataUrl = './data.json';
        const markdownUrl = './input.md';

        async function fetchData() {
            try {
                const response = await fetch(dataUrl);
                if (!response.ok) throw new Error('Network response was not ok');
                const data = await response.json();
                renderData(data);
            } catch (error) {
                document.getElementById('data-output').style.display = 'none';
                document.getElementById('fallback').style.display = 'block';
            }
        }

        function renderData(data) {
            const table = document.createElement('table');
            const headerRow = document.createElement('tr');
            headerRow.innerHTML = '<th>Currency</th><th>Amount</th><th>Rate</th>';
            table.appendChild(headerRow);

            let totalAmount = 0;
            let totalRate = 0;

            data.forEach(item => {
                const row = document.createElement('tr');
                const amount = parseFloat(item.amount);
                const rate = parseFloat(item.rate);
                totalAmount += amount;
                totalRate += rate;

                row.innerHTML = `<td>${item.currency}</td>
                                 <td>${Intl.NumberFormat("en-US", { style: "currency", currency: "USD" }).format(amount)}</td>
                                 <td>${rate.toFixed(2)}</td>`;
                table.appendChild(row);
            });

            const totalRow = document.createElement('tr');
            totalRow.innerHTML = `<td>Total</td>
                                  <td>${Intl.NumberFormat("en-US", { style: "currency", currency: "USD" }).format(totalAmount)}</td>
                                  <td>${(totalRate / data.length).toFixed(2)}</td>`;
            table.appendChild(totalRow);

            document.getElementById('data-output').appendChild(table);
        }

        async function fetchMarkdown() {
            try {
                const response = await fetch(markdownUrl);
                if (!response.ok) throw new Error('Network response was not ok');
                const text = await response.text();
                document.getElementById('markdown-output').innerHTML = text.replace(/(^|\n)(#{1,6})\s*(.+)/g, (match, p1, p2, p3) => {
                    const level = p2.length;
                    return `${p1}<h${level}>${p3}</h${level}>`;
                });
            } catch (error) {
                document.getElementById('markdown-output').innerHTML = 'Failed to load markdown.';
            }
        }

        document.getElementById('theme-toggle').addEventListener('click', () => {
            document.body.classList.toggle('dark');
            document.body.classList.toggle('light');
        });

        fetchData();
        fetchMarkdown();
    </script>
</body>
</html>
<!-- build-id: 2025-10-16T12:47:34.621546 -->